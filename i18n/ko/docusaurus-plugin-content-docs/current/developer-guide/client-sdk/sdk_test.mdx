---
sidebar_position: 8
---

# Client SDK - 연동 Test

본 섹션에서는, Notifly Client SDK가 정상적으로 연동되었는지 테스트를 진행합니다.

## 1. 유저 등록 및 이벤트 전송

### 1-1. 유저 아이디 등록

- 유저 아이디를 등록하지 않아도 유저는 생성되지만, 유저 아이디를 등록하여야 유저를 구분할 수 있습니다.
- Notifly SDK의 setUserId를 이용해 유저를 등록합니다.

### 1-2. 유저 프로퍼티 등록

- Notifly SDK의 setUserProperties를 이용해 유저 프로퍼티를 등록합니다.

### 1-3. 이벤트 전송

- Notifly SDK의 trackEvent를 이용해 이벤트를 전송합니다.

## 2. 유저 등록 및 이벤트 전송 확인

- [Notifly 홈페이지](https://notifly.tech/ko/console)에 로그인 하시고, 1에서 등록한 테스트 유저가 속한 프로젝트를 선택합니다.
  - 홈페이지 오른쪽 상단에서, 개발/프로덕션 중 테스트 유저가 등록된 프로젝트를 선택하셔야 합니다.
- 유저 메뉴를 선택하시고, [유저 리스트 페이지](https://notifly.tech/ko/console/users)에서 등록한 테스트 유저를 클릭하여 해당 유저 프로필 페이지로 이동합니다.
- 유저 프로필 페이지에서, 1-1, 1-2, 1-3에서 등록한 유저 아이디, 유저 프로퍼티, 이벤트가 정상적으로 전송되었는지 확인합니다.

**유저 리스트 페이지**
![user_list](./image/user_list.png)

**유저 프로필 페이지**
![user_page](./image/user_page.png)

- 유저 아이디와 유저 프로퍼티가 정상적으로 등록되었는지 확인합니다.

![event_list](./image/user_event_list.png)

- 이벤트가 정상적으로 전송되었는지 확인합니다.

## 3. 앱 푸시 알림 테스트

** iOS simulator에서는 푸시 알림 테스트가 불가능합니다. **

- [Notifly 캠페인 생성 페이지](https://www.notifly.tech/console/campaign/create)로 이동합니다.
- 우측 상단 탭에서 개발/프로젝션 중 테스트 유저가 등록된 프로젝트를 선택합니다.
- 1번 기본 정보 및 채널 섹션에서 `앱 푸시`을 선택합니다.
- 4번 메시지 및 액션 섹션으로 이동하여 테스트할 메시지를 입력합니다.
  - `메시지 제목` : 전송할 푸시 알림 제목을 입력합니다.
  - `메시지 내용` : 전송할 푸시 알림 내용을 입력합니다.
  - `액션` : 푸시 알림 클릭 시 액션을 지정합니다.
    - ** 꼭 URL 및 딥링크 테스팅을 모두 진행해보세요. **
    - Foreground, Background, Terminated 상태에서 모두 클릭 시 액션이 정상적으로 작동하는지 테스트를 진행해보세요.

![push_test_message_content](./image/push_test_content.png)

- 우측 하단의 "테스트 발송하기" 버튼을 클릭하고, 테스트 유저 아이디를 입력하고 테스트 발송하기를 클릭합니다.

![push_test_sending](./image/push_test_result.png)

- 정상적으로 푸시 알림이 도착했다면 테스트가 완료된 것입니다.

## 4. 인앱 메시지 테스트

** iOS simulator에서는 푸시 알림 테스트가 불가능합니다. **

- 앱을 실행하여 포어그라운드 상태로 유지합니다.
- [Notifly 인앱 메시지 제작 페이지](https://www.notifly.tech/console/in-app-message)로 이동합니다.
- 우측 상단 탭에서 개발/프로젝션 중 테스트 유저가 등록된 프로젝트를 선택합니다.
- 테스트할 인앱 메시지 템플릿을 선택합니다.
- 인앱 메시지 콘텐츠(IMAGE, TEXT, BUTTON)를 입력하여 테스트할 인앱메시지를 제작합니다. ( **`꼭 버튼의 url 및 딥링크 테스팅을 모두 진행해보세요.`** )
  - `IMAGE` : 전송할 인앱 메시지에 들어갈 이미지를 등록합니다.
  - `TEXT` : 전송할 인앱 메시지에 들어갈 텍스트를 등록합니다.
  - `BUTTON` : 전송할 인앱 메시지에 들어갈 버튼의 라벨 및 클릭 시 액션을 등록합니다. 
    - ** 꼭 URL 및 딥링크 테스팅을 모두 진행해보세요. **
    - Foreground, Background, Terminated 상태에서 모두 클릭 시 액션이 정상적으로 작동하는지 테스트를 진행해보세요.

![in_app_message_test_message_content](./image/in_app_message_test_content.png)

- 중앙 하단의 "인앱 메시지 테스트 발송하기" 버튼을 클릭합니다.
- 테스트할 유저 아이디를 입력하고, 테스트 발송하기를 클릭합니다.

![in_app_message_test_message_content](./image/in_app_message_test_result.png)

- 정상적으로 인앱 메시지가 도착했다면 테스트가 완료된 것입니다.

## 5. 웹 푸시 알림 테스트

### 5-1. 웹 푸시 테스트 발송

- [Notifly 캠페인 생성 페이지](https://www.notifly.tech/console/campaign/create)로 이동합니다.
- 우측 상단 탭에서 개발/프로젝션 중 테스트 유저가 등록된 프로젝트를 선택합니다.
- 1번 기본 정보 및 채널 섹션에서 `웹 푸시`을 선택합니다.
- 4번 메시지 및 액션 섹션으로 이동하여 테스트할 메시지를 입력합니다.
  - `메시지 제목` : 전송할 푸시 알림 제목을 입력합니다.
  - `메시지 내용` : 전송할 푸시 알림 내용을 입력합니다.
  - `액션` : 푸시 알림 클릭 시 액션을 지정합니다.
    - 웹페이지가 Focus (foreground)인 상태, Background인 상태에서 모두 푸시 수신 및 클릭 시 액션이 정상적으로 작동하는지 테스트를 진행해보세요.

![web_push_test_message_content](./image/web_push_test_content.png)

- 우측 하단의 "테스트 발송하기" 버튼을 클릭하고, 테스트 유저 아이디를 입력하고 테스트 발송하기를 클릭합니다.

![web_push_test_sending](./image/web_push_test_result.png)

- 정상적으로 푸시 알림이 도착했다면 테스트가 완료된 것입니다.

### 5-2. 웹 푸시 FAQ

웹 푸시 알림이 정상적으로 도착하지 않을 경우 가장 흔한 원인들에 대해 확인해보세요.

#### 5-2-1. 기기 권한

사용자가 기기 (macOS, Windows 등)에서 브라우저의 알림 권한을 허용해야 합니다.

예시 (macOS):

<img
  src={require('./image/macOS_notification_settings.png').default}
  width="500px"
/>


#### 5-2-2. 브라우저 권한

사용자가 브라우저에서 알림 권한을 허용해야 합니다. 브라우저마다 푸시 알림 권한의 기본 설정값과 권한 요청 방식이 다소 다릅니다. 

예시 (Chrome)

<img
  src={require('./image/chrome-granted-example.png').default}
  width="400px"
/>

예시 (Edge)

<img
  src={require('./image/edge-blocked-example.png').default}
  width="400px"
/>

노티플라이 JS SDK 의 셋업 방식에 따라 권한 요청 기본 팝업이 노출되거나 노출되지 않을 수 있습니다. 자세한 내용은 [Notifly JS SDK - Service Worker 등록하기](http://docs.notifly.tech/ko/developer-guide/client-sdk/javascript-sdk#2-3-service-worker-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0)를 참고해 주세요.

#### 5-2-3. 지원 브라우저 버전

노티플라이는 Web Push Protocol을 통하여 웹 푸시를 발송하고 있습니다. 현재 지원되는 브라우저와 버전은 [Push API - Browser compatibility](https://developer.mozilla.org/en-US/docs/Web/API/Push_API)를 확인해 주세요.

- 예를 들어, 데스크탑에서 Safari 버전 15 이하에서는 웹 푸시가 지원되지 않습니다.

#### 5-2-4. 그 외

노티플라이 팀에 문의해 주시면 빠르게 확인해 드리겠습니다.
