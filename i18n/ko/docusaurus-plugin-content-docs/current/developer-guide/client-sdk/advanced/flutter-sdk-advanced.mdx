---
sidebar_position: 3
---

# (Advanced) Client SDK - Flutter

```mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
```

## 1. í‘¸ì‹œ ì•Œë¦¼ ì•„ì´ì½˜ ì„¤ì • (Android)

Notifly Flutter Pluginì—ì„œëŠ” í‘¸ì‹œë¥¼ ìˆ˜ì‹ í•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ ì•± ê¸°ë³¸ ì•„ì´ì½˜ì„ í‘¸ì‹œ ì•Œë¦¼ ì•„ì´ì½˜ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

ë§Œì•½ ì•± ê¸°ë³¸ ì•„ì´ì½˜ê³¼ ë‹¤ë¥¸ ì•„ì´ì½˜ì„ í‘¸ì‹œ ì•Œë¦¼ ì•„ì´ì½˜ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš°, `ic_stat_notifly_default` ì˜ ì´ë¦„ìœ¼ë¡œ notification iconì„ ë§Œë“¤ì–´ ì£¼ì„¸ìš”. notification iconì„ ë§Œë“œëŠ” ê°€ì´ë“œëŠ” [Android Developers - Create app icons](https://developer.android.com/studio/write/create-app-icons)ë¥¼ ì°¸ê³ í•´ ì£¼ì„¸ìš”.

## 2. í‘¸ì‹œ ì•Œë¦¼ ì‚¬ì „ ë™ì˜

Notifly Flutter Pluginì—ì„œëŠ” í‘¸ì‹œ ì•Œë¦¼ì„ ìˆ˜ì‹ í•˜ëŠ” ì‹œì ì— ì‚¬ìš©ìì—ê²Œ í‘¸ì‹œ ì•Œë¦¼ ìˆ˜ì‹  ë™ì˜ë¥¼ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤. ì‚¬ìš©ì ì•Œë¦¼ ìˆ˜ì‹  ë™ì˜ëŠ” Notifly Flutter Plugin ì„¤ì¹˜ì™€ ë¬´ê´€í•˜ê²Œ ì•± ë‚´ì—ì„œ ì§ì ‘ êµ¬í˜„í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.

Flutter í”„ë¡œì íŠ¸ì—ì„œ FirebaseMessaging ì„ ì‚¬ìš©í•˜ê³  ê³„ì‹  ê²½ìš°, `requestPermission` API ([ì˜ˆì‹œ](https://firebase.flutter.dev/docs/messaging/permissions/#requesting-permissions)) ë£° ì‚¬ìš©í•´ì„œ ê¶Œí•œ ìš”ì²­ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 3. í‘¸ì‹œ ì•Œë¦¼ í´ë¦­ ì´ë²¤íŠ¸ êµ¬ë…

:::warning SDK ë²„ì „

í•´ë‹¹ ê¸°ëŠ¥ì€ Notifly Flutter SDK 1.4.0 ì´ìƒ ë²„ì „ë¶€í„° ì§€ì›ë©ë‹ˆë‹¤.

:::

:::warning ì§€ì›ë˜ëŠ” í”Œë«í¼

í•´ë‹¹ ê¸°ëŠ¥ì€ Android í”Œë«í¼ì—ì„œë§Œ ì§€ì›ë©ë‹ˆë‹¤.

iOS í”Œë«í¼ì˜ ê²½ìš°, Firebase Messaging SDKë¥¼ ì‚¬ìš©í•˜ì—¬ í‘¸ì‹œ ì•Œë¦¼ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. [Firebase Messaging SDK - Handling messages](https://firebase.google.com/docs/cloud-messaging/flutter/receive?hl=ko)ë¥¼ ì°¸ê³ í•´ ì£¼ì„¸ìš”.

:::

Notifly Flutter SDKì—ì„œëŠ” í‘¸ì‹œ ì•Œë¦¼ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ êµ¬ë…í•˜ì—¬ ì‚¬ìš©ìê°€ í‘¸ì‹œ ì•Œë¦¼ì„ í´ë¦­í–ˆì„ ë•Œ ì•± ë‚´ì—ì„œ íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```dart title="main.dart"
class MyApp extends StatefulWidget {
  const MyApp({super.key});

  @override
  _MyAppState createState() => _MyAppState();
}

class _MyAppState extends State<MyApp> {
  Future<void> initNotifly() async {
    WidgetsFlutterBinding.ensureInitialized();

    await NotiflyPlugin.initialize(
      projectId: dotenv.env['NOTIFLY_PROJECT_ID']!,
      username: dotenv.env['NOTIFLY_USERNAME']!,
      password: dotenv.env['NOTIFLY_PASSWORD']!,
    );

    print('ğŸ”¥ [Flutter] NotiflyPlugin initialized');

    if (!kIsWeb && Platform.isAndroid) {
      // highlight-start
      await NotiflyPlugin.addNotificationClickListener((event) {
        print(
            'ğŸ”¥ [NotiflyFlutterPackage]: Notification clicked: ${event.notification.title}');
        print(
            'ğŸ”¥ [NotiflyFlutterPackage]: Notification clicked: ${event.notification.body}');
        print(
            'ğŸ”¥ [NotiflyFlutterPackage]: Notification clicked: ${event.notification.customData}');
        // Do something when notification is clicked
      });
      // highlight-end
    }
  }

  @override
  Widget build(BuildContext context) {
    return MaterialApp.router(routerConfig: router);
  }

  @override
  void dispose() {
    super.dispose();
  }

  @override
  void initState() {
    super.initState();
    initNotifly();
  }
}
```

### 3-1. í‘¸ì‹œ ì•Œë¦¼ í´ë¦­ ì´ë²¤íŠ¸ ì¸í„°í˜ì´ìŠ¤

`OSNotificationClickEvent` ì˜ `OSNotificationClickEvent` ë©¤ë²„ì— ì ‘ê·¼í•˜ì—¬, ì‚¬ìš©ìê°€ í´ë¦­í•œ í‘¸ì‹œì— ëŒ€í•œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```dart title="notification.dart"
/// Callback for handling received notifications.
typedef NotificationClickListener = void Function(
  OSNotificationClickEvent event,
);

/// Represents a notification received from the Notifly service.
enum OSNotificationImportance {
  /// The notification is of low importance.
  low,

  /// The notification is of normal importance.
  normal,

  /// The notification is of high importance.
  high,
}

/// Represents a notification received from the Notifly service.
class OSNotification extends JSONStringRepresentable {
  /// The Notifly message ID of the notification.
  String? notiflyMessageId;

  /// (Only Android) The Android system notification ID of the notification.
  int? androidNotificationId;

  /// Notifly campaign ID where the notification was sent from.
  String? campaignId;

  /// Notification title
  String? title;

  /// Notification body
  String? body;

  /// (Only Android) Importance of the notification.
  OSNotificationImportance? importance;

  /// URL included in the notification.
  String? url;

  /// URL to the image included in the notification.
  String? imageUrl;

  /// Sent time of the notification in milliseconds since epoch
  int? sentTime;

  /// TTL of the notification in seconds
  int? ttl;

  /// Customized data included in the notification.
  Map<String, dynamic>? customData;

  /// Raw payload of the notification.
  Map<String, dynamic>? rawPayload;
}

/// Represents a notification click event.
class OSNotificationClickEvent {
  OSNotification notification;
}

```

| Property name           | Type                    | Description                                                                                                             | Since |
| ----------------------- | ----------------------- | ----------------------------------------------------------------------------------------------------------------------- | ----- |
| `androidNotificationId` | `int?`                  | Android system-level í‘¸ì‹œ ì•Œë¦¼ IDì…ë‹ˆë‹¤.                                                                                | 1.5.0 |
| `campaignId`            | `String?`               | í‘¸ì‹œ ì•Œë¦¼ì´ ë°œì†¡ëœ Notifly ìº í˜ì¸ì˜ IDì…ë‹ˆë‹¤.                                                                           | 1.5.0 |
| `body`                  | `String?`               | í‘¸ì‹œ ë©”ì‹œì§€ì˜ ë‚´ìš©ì…ë‹ˆë‹¤.                                                                                               | 1.5.0 |
| `title`                 | `String?`               | í‘¸ì‹œ ë©”ì‹œì§€ì˜ ì œëª©ì…ë‹ˆë‹¤.                                                                                               | 1.5.0 |
| `url`                   | `String?`               | í‘¸ì‹œ ë©”ì‹œì§€ê°€ í´ë¦­ë˜ì—ˆì„ ë•Œ ì´ë™í•  URLì…ë‹ˆë‹¤. ë§Œì•½ 'ì•± ì‹¤í–‰' ì•¡ì…˜ìœ¼ë¡œ í‘¸ì‹œ ì•Œë¦¼ì„ ë°œì†¡í•˜ì˜€ë‹¤ë©´, `null` ê°’ì´ ë°˜í™˜ë©ë‹ˆë‹¤. | 1.5.0 |
| `customData`            | `Map<String, dynamic>?` | FCM í‘¸ì‹œ ë©”ì‹œì§€ì˜ `data` í•„ë“œì— í¬í•¨ëœ í‚¤-ê°’ ìŒì˜ ì»¤ìŠ¤í…€ ë°ì´í„°ì…ë‹ˆë‹¤. ë…¸í‹°í”Œë¼ì´ ì½˜ì†”ì—ì„œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.          | 1.5.0 |
| `imageUrl`              | `String?`               | ì´ë¯¸ì§€í˜• í‘¸ì‹œ ë©”ì‹œì§€ì— í¬í•¨ëœ ì´ë¯¸ì§€ URL ì…ë‹ˆë‹¤.                                                                        | 1.5.0 |
| `importance`            | `Importance`            | `Importance.high`, `Importance.normal`, `Importance.low` ì¤‘ í•˜ë‚˜ì˜ ê°’ì…ë‹ˆë‹¤.                                            | 1.5.0 |
| `notiflyMessageId`      | `String?`               | Notifly ì„œë²„ì—ì„œ ì„ì˜ë¡œ ìƒì„±í•œ ë©”ì‹œì§€ IDì…ë‹ˆë‹¤.                                                                         | 1.5.0 |
| `rawPayload`            | `Map<String, dynamic>?` | FCM dataì˜ ê°€ê³µë˜ì§€ ì•Šì€ payloadì…ë‹ˆë‹¤. JSONì„ stringifyí•œ í˜•íƒœë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.                                           | 1.5.0 |
| `sentTime`              | `int?`                  | FCM ì„œë²„ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ì„ ë°œì†¡í•œ ì‹œê°„ì…ë‹ˆë‹¤.                                                                             | 1.5.0 |
| `ttl`                   | `int?`                  | í‘¸ì‹œ ì•Œë¦¼ì˜ TTL(Time To Live) ê°’ì…ë‹ˆë‹¤.                                                                                 | 1.5.0 |
